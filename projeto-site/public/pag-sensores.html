<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
    <title>Estufa</title>
    <link rel="stylesheet" href="./css/pag-sensores-style.css">
    <!-- <link rel="stylesheet" href="css/home.css"> -->
    <!-- <link rel="stylesheet" href="ccs/modal.css"> -->
</head>

<body>
    <div class="modal-editar">
        <div class="modalEditar">
            <div class="image">
                <img src="imagens/measurement.png">
            </div>
            <div class="formEstufa">
                <h3>Detalhes do sensor</h3>
                <form>
                    <input type="text" id="estufaTipoCultura" placeholder="Cultura">
                    <input type="text" id="statusSensor" placeholder="Status">
                    <input type="text" id="umiMax" placeholder="Umidade Máxima">
                    <input type="text" id="umiMin" placeholder="Umidade Mínima">
                    <input type="text" id="tempMaxima" placeholder="Tempêratura Máxima">
                    <input type="text" id="tempMin" placeholder="Tempêratura Mínima">
                </form>
            </div>
        </div>
    </div>

    <div class="modal-excluir">
        <div class="modalExcluir">
            <p>Deseja realmente excluir o sensor?</p>
            <div class="btns">
                <a id="confirmaExcluir">Excluir Sensor</a>
                <a id="cancelaExcluir">Cancelar</a>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="navbar">
            <header>
                <p>Green<span>Sensors</span></p>
            </header>
            <main>
                <div class="item">
                    <img src="imagens/house.svg">
                    <a href="home.html">Home</a>
                </div>
                <div class="item">
                    <img src="imagens/bar-chart.svg">
                    <a href="home.html">Estatística</a>
                </div>
                <div class="item">
                    <img src="imagens/players.svg">
                    <a href="pag-perfil.html">Perfil</a>
                </div>
                <div class="item">
                    <img src="imagens/speedometer.svg">
                    <a href="pag-sensores.html">Sensores</a>
                </div>
                <div class="item">
                    <img src="imagens/login.svg">
                    <a onclick="logOff()">Sair</a>
                </div>
            </main>
        </div>
        <div class="info">
            <div class="info-title">
                <h1>Sensores</h1>
            </div>
            <div class="info-detalhes">
                <div class="title">
                    <h1>Consulte seus sensores</h1>
                </div>
            </div>
            <div class="estufas">
                <div class="divisao_div">
                    <div class="base_sensores"><img onclick="carregarDados(30000)" src="./imagens/measurement.png">
                        <h2 >Ativo</h2>
                        <h2>Estufa: A4</h2>
                        <!-- <button id="editar_sensor">Editar</button> -->
                        <button onclick="carregarDados(30000)">Ver detalhes</button>
                        
                        
                        <b></b>
                    </div>
                    <div class="base_sensores"><img onclick="carregarDados(30002)" src="./imagens/measurement.png">
                        <H2>Manutenção</H2>
                        <h2>Estufa: DD4</h2>
                        <button onclick="carregarDados(30002)">Ver detalhes</button>
                    </div>
                </div>
                <!-- <div class="divisao_div">
                    <div class="base_sensores"><img onclick="abrirModalEditar()" src="./imagens/measurement.png">
                        <h2>Inativo</h2>
                        <h2>Estufa: B3</h2>
                        <button onclick="abrirModalEditar()">Ver detalhes</button>
                    </div>
                    <div class="base_sensores"><img onclick="abrirModalEditar()" src="./imagens/measurement.png">
                        <h2>Ativo</h2>
                        <h2>Estufa: S2</h2>
                        <button onclick="abrirModalEditar()">Ver detalhes</button>
                    </div>
                </div> -->
            </div>
        </div>


    </div>

    <script src="js/script2.js"></script>

    <script src="js/verificacoes.js"></script>
    <!-- <script src="js/verificarEstufas.js"></script> -->
</body>
</html>
<script>
    
    function carregarDados(idSensor){
        fetch(`/sensores/sensores-detalhe/${idSensor}`).then(resposta =>{
            if(resposta.ok){
                resposta.json().then(dados =>{
                    abrirModalEditar();
                    estufaTipoCultura.value = dados.tipoCultura;
                    statusSensor.value = dados.statusSensor;
                    tempMaxima.value = dados.temperaturaMaxima;
                    tempMin.value = dados.temperaturaMinima;
                    umiMax.value = dados.umidadeMaxima;
                    umiMin.value = dados.umidadeMinima;
                })
            }
        })
    }
    
</script>